　karambaでの部材断面形状の設定方法についてここでは、紹介します。
　まずは作成したモデルについてです。使いかたを確認するため、単純な一端固定、一端に節点荷重をかける片持梁を考えます。

![Image](/media/blog/blog-post/-25E3-2583-25A2-25E3-2583-2587-25E3-2583-25AB-25E5-25BD-25A2-25E7-258A-25B6.JPG)

　ｋarambaでの断面の簡単な設定法は二つあります。一つはCrossSectionSelecterコンポーネントを使用する方法です。Karambaにすでに設定されている断面の名称を入力するだけで、その断面が反映されます。設定されている断面はあとで述べますが、日本のものではJISのH型鋼のみとなります。　もう一つの設定法は、CrossSectionsコンポ―ネントを使用することです。このコンポーネントでは、H型鋼ならば、梁せいや幅、板厚等を個々に設定し断面を定義するものです。　作成した断面情報はAssembleModelコンポーネントのCrossSectionに入力してあげることで、モデルに反映させることができます。すべてのモデルで同一断面にしない場合は、Elems|Idsに対象としたい要素名を入力することで各要素ごとに断面を適用できます。
![Image](/media/blog/blog-post/-25E6-2596-25AD-25E9-259D-25A2-25E9-2581-25B8-25E3-2581-25B3-25E6-2596-25B9.JPG)

　また、ｋarambaには断面の最適化ツールが備わっています。OptimizeCrossSectionコンポーネントです。このコンポーネントでは、入力されたモデルに対して決められた断面サイズの範囲の中でUtilizationが最大となるような断面を決定します。Utilizationは検定比にあたるものです。詳しくは[karambaのutilizationの検証](http://rgkr-memo.blogspot.jp/2015/12/karamba.verify.utilization.html#more)を参照してください。　今回のモデルでは、10mに片持ち梁に対して、300kNの荷重をかけています。最適化結果と曲げモーメント分布を下に載せます。
![Image](/media/blog/blog-post/-25E6-2596-25AD-25E9-259D-25A2-25E6-259C-2580-25E9-2581-25A9-25E5-258C-2596.JPG)

![Image](/media/blog/blog-post/-25E6-259B-25B2-25E3-2581-2592-25E5-2588-2586-25E5-25B8-2583.JPG)

![Image](/media/blog/blog-post/-25E6-25A2-2581-25E7-25AC-25A6-25E5-258F-25B72.JPG)

　結果をみると、片持梁なので端部に大きな曲げモーメントが発生するようになっており、それに合わせて先端から断面が太くなっていっていることが分かり、応力に合わせて断面形状が変化しており、最適化が行われていることがわかります。
　OptimizeCrossSectionコンポーネントでは、単純に最適化するのみではなく、目標の要素重量や、最適モデルからの最適化による変位の増大や、使用率の範囲等を細かくしてすることができます　。

　上でも述べましたが、ｋarambaで標準で入っている断面は、日本のものではH型のみで以下41種類でJIS規格のものだと思われます。JIS規格なので、Karambaの表記上 H 600x300x12x20となっていても、計算上使用されている断面形状は、せい588mm 幅300mm ウェブ厚12mm フランジ厚20mmだったりするので注意が必要です。

![Image](/media/blog/blog-post/-25E6-2596-25AD-25E9-259D-25A2-25E6-2597-25A5-25E6-259C-25AC-25E3-2583-2587-25E3-2583-2595-25E3-2582-25A9-25E3-2583-25AB-25E3-2583-2588.JPG)

また、断面のデータが入っているcsvファイルをみると、断面の力学的性能とその形状が、熱間成型、冷間成型、溶接組立、ロールのいずれかを入力する項目があります。何に使用しているのかはわかりませんが、靭性の評価等に使用しているのでしょうか？。
　断面にあわせて、材料も紹介します。デフォルトでは鋼材しか入っておらず下記のようになっています。
![Image](/media/blog/blog-post/-25E6-259D-2590-25E6-2596-2599-25E6-2597-25A5-25E6-259C-25AC-25E3-2583-2587-25E3-2583-2595-25E3-2582-25A9-25E3-2583-25AB-25E3-2583-2588.JPG)

　断面も材料特性もデフォルトのフォルダ中にあるcsvファイルから呼んできているだけなので、必要に応じて、自分で増やすことができます。
たとえば角型鋼管材を追加してあげれば、柱は角型鋼管、梁はH型鋼といったように定義したグループごとに断面の最適化が可能です。
