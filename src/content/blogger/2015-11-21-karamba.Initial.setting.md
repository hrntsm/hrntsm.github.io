---
path: "/blog/2015/11/karamba.Initial.setting"
title: "karambaの初期設定"
date: "15/11/21"
originalUrl: "https://rgkr-memo.blogspot.com/2015/11/karamba.Initial.setting.html"
slug: "/blog/2015/11/karamba.Initial.setting"
tags:
    - karamba
---
　karambaの初期設定の変更法について説明します。karambaの初期設定は、karamba.ini　というファイルに記述されています。データの場所は、デフォルトでは  
<div>　"rhinoがインストールされているフォルダ \Plug-ins\Karamba\karamba.ini"</div><div>となっていると思います。編集はテキストエディタで行います。では開いて見ましょう。</div><div>  

</div><div>　開くと始めに以下のようなことが書かれていると思います。ここから先は、内容を確認しながら何の設定なのかみていきます。</div><div>  
</div><div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># this is the karamba ini-file</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># written by Clemens Preisinger</span></div><div><span style="color: #666666;"># 15.08.2011</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># - comments start with '#' or ';'</span></div><div><span style="color: #666666;"># - string-formatting of numbers follows the C# formating conventions</span></div><div><span style="color: #666666;">#   here some examples:</span></div><div><span style="color: #666666;">#      just two decimal places</span></div><div><span style="color: #666666;">#          "{0:0.00}";    123.4567 -> "123.46"</span></div><div><span style="color: #666666;">#          "{0:0.00}";    123.4    -> "123.40"</span></div><div><span style="color: #666666;">#      max. two decimal places</span></div><div><span style="color: #666666;">#          "{0:0.##}";    123.4567 -> "123.46"</span></div><div><span style="color: #666666;">#          "{0:0.##}";    123.4    -> "123.4"</span></div><div><span style="color: #666666;">#          "{0:0.##}";    123.0    -> "123"</span></div><div><span style="color: #666666;">#      align numbers</span></div><div><span style="color: #666666;">#          "{0,10:0.0}";  123.4567 -> "     123.5"</span></div><div><span style="color: #666666;">#          "{0,-10:0.0}"; 123.4567 -> "123.5     "</span></div><div><span style="color: #666666;">#      ouput number in percent</span></div><div><span style="color: #666666;">#          "%";             0.1    -> "10%"</span></div><div><span style="color: #666666;"># - colors are named following the C# naming convention ()</span></div><div><span style="color: #666666;"># - for properties not found here default values will be chosen </span></div><div><span style="color: #666666;"># - strings need to be enclosed in '"'</span></div><div><span style="color: #666666;"># - values and property names are case-sensitive</span></div><div><span style="color: #666666;">#---</span></div></div><div>  
</div><div>内容は、以下のようになっています。</div><div>  
</div><div>・このファイルでは、文頭が”＃”または”；”の行はコメント（読み込まない）行になる</div><div>・数字のフォーマットはC＃にならう</div><div>　たとえば</div><div>　小数点以下2位ちょうどで表示したい場合</div><div><div>          "{0:0.00}";    123.4567 -> "123.46"</div><div>          "{0:0.00}";    123.4   　 -> "123.40"</div></div><div>　最大で小数点以下2位としたい場合</div><div>          "{0:0.##}";    123.4567 -> "123.46"</div><div>          "{0:0.##}";    123.4　    -> "123.4"</div><div>          "{0:0.##}";    123.0  　  -> "123"# </div><div>　結果の右揃えや左揃えにしたい場合</div><div>          "{0,10:0.0}";  123.4567 -> "     123.5"</div><div>          "{0,-10:0.0}"; 123.4567 -> "123.5     "</div><div>   パーセントで結果を表示する場合</div><div>          "%";             0.1    -> "10%"</div><div>・色はC#での名前にならう</div><div>・ここで設定しなかったものは、プログラム上でのデフォルト設定になる</div><div>・文字列は　”　で囲われる必要がある</div><div>・値や設定の名前は、大文字、小文字の区別がある</div><div>　では次の段落へ</div><div>  
</div><div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># units to be used in Karamba. Do not mix Grasshopper definitions that</span></div><div><span style="color: #666666;"># use different units.</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;">  
</span></div><div><span style="color: #666666;">UnitsSytem = "SI"</span></div><div><span style="color: #666666;"># UnitsSytem = "imperial"</span></div></div><div>  
</div><div>　これは単位系の設定です。始めに、karambaはgrasshopperとは単位が関連付けられているわけではないので注意しましょうとなっています。その下の内容が単位の設定です。現在私の設定ではSI単位系となっているため、UnitsSytem　は”SI”のほうが選択されており、”imperial”はコメント行として読み込まれないようになっています。</div><div>　では次の段落へ</div><div>  
</div><div><div><span style="color: #666666;">#--- </span></div><div><span style="color: #666666;"># default path of the license directory</span></div><div><span style="color: #666666;"># uncomment the entry by removing the '#' and set it to a custom value in case the default does not work for some reason</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># license_path = "C:\Program Files (x86)\Rhinoceros 4.0\Plug-ins\Grasshopper\Karamba\License"</span></div></div><div>  
</div><div>　ここは、karambaのライセンスファイルの参照先についてです。基本は直接参照されるので、コメント行になっている license_path はコメントのままにしておきます。参照がうまくいかなかった場合に使用しましょう。</div><div>　では次の段落へ</div><div>  
</div><div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># number format of the 'Legend T' output of the ModelView-component for</span></div><div><span style="color: #666666;">#    stresses, strains and utilization</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;">legend_stress_number_fmt = "{0,9:0.00e+00}"</span></div><div><span style="color: #666666;">legend_strain_number_fmt = "{0,9:0.00e+00}"</span></div><div><span style="color: #666666;">legend_utilization_number_fmt = "{0,9:0.0}%"</span></div></div><div><span style="color: #666666;">  
</span></div><div>　ここではModelView-componetの出力であるLegend Tの出力数値の形式を指定する箇所です。最初の{0,9:は表示の文字の位置を調節します。そのあとの部分は、stress(応力)とstrain(ひずみ)は小数点以下２桁まで表示した指数表記、utilization(使用率)は小数点以下１桁まで表示するパーセント表記となっています。  
　では次の段落へ</div><div>  
</div><div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># number of colors for visualizing stresses, strains in positive and negative range</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;">legend_num_colors = 16</span></div></div><div><span style="color: #666666;">  
</span></div><div>　ここでは、応力とひずみの値を色のコンターで表示する際の、階調の色数を設定しています。初期設定は16色となっています。</div><div>　では次の段落へ</div><div>  
</div><div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># if true and zero lies in the range of results then the colour range will be centred on zero</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;">center_color_range_on_zero = true</span></div></div><div><span style="color: #666666;">  
</span></div><div>　ここでは先程に続き、出力時の色のコンターの中央値の設定です。ブーリアン形式で記述し、trueであれば最大値、最小値に関わらず色の中央が 0 となるように色の設定をします。初期設定は true となっています。余談ですが、なぜかここのカラーのつづりだけイギリス英語(colour)です。</div><div>　では次の段落へ</div><div>  
</div><div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># coloring of legends</span></div><div><span style="color: #666666;"># color names can either be given by name or RGB value: (red, green, blue)</span></div><div><span style="color: #666666;"># the first color signifies values below the result range</span></div><div><span style="color: #666666;"># the last color signifies values above the result range</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;">legend_colors = yellow|red|white|blue|LimeGreen</span></div><div><span style="color: #666666;">resultant_disp_legend_colors = yellow|white|magenta|LimeGreen</span></div><div><span style="color: #666666;">thickness_legend_colors = Wheat|white|Gold|Plum</span></div><div><span style="color: #666666;">beam_stress_legend_colors = yellow|red|(255,255,255)|blue|LimeGreen</span></div><div><span style="color: #666666;">beam_utilization_legend_colors = yellow|red|white|blue|LimeGreen</span></div><div><span style="color: #666666;">shell_utilization_legend_colors = yellow|red|white|blue|LimeGreen</span></div><div><span style="color: #666666;">shell_sig1_legend_colors = yellow|red|white|blue|LimeGreen</span></div><div><span style="color: #666666;">shell_sig2_legend_colors = yellow|red|white|blue|LimeGreen</span></div><div><span style="color: #666666;">shell_sigV_legend_colors = yellow|red|white|(0,0,255)|LimeGreen</span></div></div><div><span style="color: #666666;">  
</span></div><div>　ここでは結果をコンターで表示する際の色を設定します。色は、C#においてデフォルトで設定されている色の名前、またはRGB(赤,緑,青)で設定することができます。最初の色が一番下の色、最後の色が一番上の色となり、コンターには含まれない色になります。コンター上で表示されるのは最初と最後の色を抜いた範囲で設定されます。  
　設定する色は表示順に、凡例のコンター、変位のコンター、板厚のコンター、梁要素の応力のコンター、梁要素の使用率のコンター、シェル要素の使用率のコンター、シェル要素の主応力1のコンター、シェル要素の主応力2のコンター、シェル要素のフォンミーゼス応力のコンター、となっています。  
　例えば変位のコンターの箇所を  
　　　resultant_disp_legend_colors = white|blue|lightBlue|LimeGreen|yellow|red|white  
と変えると、下図のようにMi○asのようなコンターとすることができます。私はこちらの色合いのほうがなじみがあるので、結果が見てわかりやすく安心感があります。また、上で述べたように、最初と最後に設定した色（ここではWhite）がコンターに含まれていないこともわかります。  

<div class="separator" style="clear: both; text-align: center;">[![](http://1.bp.blogspot.com/-ovC2iDsrtig/VlBLVMZsP-I/AAAAAAAABAQ/jbD_SF9wBRk/s640/%25E3%2582%25AB%25E3%2583%25A9%25E3%2583%25BC%25E3%2582%25B3%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC.JPG)](http://1.bp.blogspot.com/-ovC2iDsrtig/VlBLVMZsP-I/AAAAAAAABAQ/jbD_SF9wBRk/s1600/%25E3%2582%25AB%25E3%2583%25A9%25E3%2583%25BC%25E3%2582%25B3%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC.JPG)</div></div><div>　  
　では次の段落へ</div><div>  
</div><div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># default cross section color of beams and shells</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;">beam_cross_section_color = Blue</span></div><div><span style="color: #666666;">shell_cross_section_color = LightBlue</span></div></div><div><span style="color: #666666;">  
</span></div><div>　ここではデフォルトの断面の色を設定します。初期設定では、梁要素は青色、シェル要素は水色となっています。</div><div>　では次の段落へ</div><div>  
</div><div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># colors for coloring the cross section forces curves</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;">crosec_force_color_Nx = LightSalmon</span></div><div><span style="color: #666666;">crosec_force_color_Vy = LightGreen</span></div><div><span style="color: #666666;">crosec_force_color_Vz = LightSkyBlue</span></div><div><span style="color: #666666;">crosec_force_color_Mx = Red</span></div><div><span style="color: #666666;">crosec_force_color_My = SeaGreen</span></div><div><span style="color: #666666;">crosec_force_color_Mz = CadetBlue</span></div></div><div><span style="color: #666666;">  
</span></div><div>　ここでは梁要素の断面力を図示する際の色の設定をします。設定の順番は、軸力Nx、せん断Vy、せん断Vz、ねじりMx、曲げMy、曲げMz　です。</div><div>　では次の段落へ</div><div>  
</div><div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># color and number format for output of cross section forces</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;">crosec_number_fmt = "{0:f}"</span></div><div><span style="color: #666666;">crosec_number_color = "Black"</span></div></div><div><span style="color: #666666;">  
</span></div><div>　ここでは断面力の出力の値の数字のフォーマットと、色を設定しています。初期設定は、値は小数点以下２桁までで黒色の文字で出力です。</div><div>　では次の段落へ</div><div>  
</div><div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># text color, height and offset of element identifiers</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;">elemID_text_height = 20</span></div><div><span style="color: #666666;">elemID_text_offset = 20</span></div><div><span style="color: #666666;">elemID_text_color = "Black"</span></div></div><div><span style="color: #666666;">  
</span></div><div>　ここでは要素のIDを表示するときの文字の高さとオフセットする距離、色を設定します。初期設定は高さ20、オフセット20、黒色となっています。</div><div>　では次の段落へ</div><div>  
</div><div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># text height and offset of cross section names</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;">crosec_text_height = 20</span></div><div><span style="color: #666666;">crosec_text_offset =-20</span></div><div><span style="color: #666666;">crosec_text_color = "Black"</span></div></div><div><span style="color: #666666;">  
</span></div><div>　ここでは断面の名前を表示するときの文字の高さとオフセットする距離、色を設定します。初期設定は高さ20、オフセット-20、黒色となっています。  
<div></div></div><div>　では次の段落へ</div><div>  
</div><div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># text height and offset of cross material names</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;">material_text_height = 20</span></div><div><span style="color: #666666;">material_text_offset =-20</span></div><div><span style="color: #666666;">material_text_color = "Black"</span></div></div><div><span style="color: #666666;">  
</span></div><div>　ここでは材料名を表示するときの文字の高さとオフセットする距離、色を設定します。初期設定は高さ20、オフセット-20、黒色となっています。  
<div></div></div><div>　では次の段落へ</div><div>  
</div><div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># text height and offset of node tags</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;">node_text_height = 20</span></div><div><span style="color: #666666;">node_text_offset =-20</span></div><div><span style="color: #666666;">node_text_color = "Black"</span></div></div><div><span style="color: #666666;">  
</span></div><div><div>　ここでは節点のタグを表示するときの文字の高さとオフセットする距離、色を設定します。初期設定は高さ20、オフセット-20、黒色となっています。</div><div></div>では次の段落へ</div><div>  
</div><div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># text height and offset of NII values at elements</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;">NII_text_height = 20</span></div><div><span style="color: #666666;">NII_text_offset =-20</span></div><div><span style="color: #666666;">NII_text_color = "Black"</span></div><div><span style="color: #666666;">NII_number_fmt = "{0:f}"</span></div></div><div><span style="color: #666666;">  
</span></div><div>  
<div style="-webkit-text-stroke-width: 0px; color: black; font-family: 'Times New Roman'; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;"></div>  
<div style="-webkit-text-stroke-width: 0px; color: black; font-family: 'Times New Roman'; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px;"><div style="margin: 0px;">　ここではAnalyzeTHⅡで解析したときの結果を表示するときの文字の高さとオフセットする距離、色、数字のフォーマットを設定します。初期設定は高さ20、オフセット-20、黒色、小数点以下2位まで表示となっています。</div></div></div><div>　では次の段落へ</div><div>  
</div><div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># maximum number of beam sections for mesh display</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;">maximum_ncrosec=500</span></div></div><div><span style="color: #666666;">  
</span></div><div>　ここではメッシュ表示するための梁要素断面の最大数を設定しています。初期設定では500となっています。</div><div>　では次の段落へ</div><div>  
</div><div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># factor for number of faces for rendering circular cross sections</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;">circular_cross_sections_n_faces_factor=6</span></div></div><div><span style="color: #666666;">  
</span></div><div>　ここでは円形の断面を表示するために、円を多角形に置換する際の多角形の角数を設定しています。初期設定では、6となっています。</div><div>　では次の段落へ</div><div>  
</div><div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># maximum number of line segments per element when drawing stress- or force-flow-lines on meshes</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;">maximum_mesh_lines_per_element=500</span></div></div><div><span style="color: #666666;">  
</span></div><div>　ここではメッシュで応力や荷重や力の流れを線表示する際の線の最大分割数</div><div>を設定しています。初期設定では、500となっています。  
　では次の段落へ</div><div>  
</div><div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;"># offset between symbols and annotations</span></div><div><span style="color: #666666;">#---</span></div><div><span style="color: #666666;">annotation_offset=20</span></div></div><div><span style="color: #666666;">  
</span></div><div>　ここでは符号と注記間の間隔を設定します。初期設定では20となっています。</div><div>  
</div><div>　初期設定の項目は以上となります。結構細かく設定していくことができるようですね。これらを変更して、自分の使いやすいkarambaとしていきましょう。</div>