---
path: "/blog/2015/07/karamba"
title: "karambaを使った簡単な形態検討法"
date: "15/07/06"
originalUrl: "https://rgkr-memo.blogspot.com/2015/07/karamba.html"
slug: "/blog/2015/07/karamba"
tags:
    - karamba
    - grasshopper
    - rhinoceros
---
<div dir="ltr">　ｋarambaを使用した簡単な形状検討法を紹介します。  
<span style="color: #333333;"><span style="background-color: white; line-height: 17.018196105957px;">　端点を固定されたシェル要素に対して節点荷重をかけることでシェルの形状を変化させ、様々な形状を作成してみます。</span></span>  
<div class="separator" style="clear: both; text-align: center;">[![](http://3.bp.blogspot.com/-cLH1zyxYsRI/VYiYLAJavfI/AAAAAAAAABw/i27GKjKtC3c/s320/karamba_form_finding.JPG)](http://3.bp.blogspot.com/-cLH1zyxYsRI/VYiYLAJavfI/AAAAAAAAABw/i27GKjKtC3c/s1600/karamba_form_finding.JPG)</div><div class="separator" style="clear: both; text-align: center;">最終形状</div>  
<div class="separator" style="clear: both; text-align: center;">始めに平面にメッシュを作成します。ここでは2点から矩形のサーフェスをつくり、そこからメッシュを作成してします。</div>  
<div class="separator" style="clear: both; text-align: center;">[![](http://3.bp.blogspot.com/-RurgZYz7lQI/VYibRMIEdyI/AAAAAAAAAB8/7JvB0DmvlJk/s640/%25E3%2583%25A1%25E3%2583%2583%25E3%2582%25B7%25E3%2583%25A5%25E3%2581%25AE%25E4%25BD%259C%25E6%2588%2590.JPG)](http://3.bp.blogspot.com/-RurgZYz7lQI/VYibRMIEdyI/AAAAAAAAAB8/7JvB0DmvlJk/s1600/%25E3%2583%25A1%25E3%2583%2583%25E3%2582%25B7%25E3%2583%25A5%25E3%2581%25AE%25E4%25BD%259C%25E6%2588%2590.JPG)</div>  
　メッシュができたら「Mesh to Shell (karamba)」コンポーネントを使用することで、Karambaでの解析用のシェル要素を作成することができます。  

<div class="separator" style="clear: both; text-align: center;">[![](http://4.bp.blogspot.com/-qBRgGwvk5qE/VYl2x344MQI/AAAAAAAAACQ/aCve-NWp5dM/s320/karamba%25E3%2581%25AE%25E3%2582%25B7%25E3%2582%25A7%25E3%2583%25AB%25E8%25A6%2581%25E7%25B4%25A0%25E4%25BD%259C%25E6%2588%2590.JPG)](http://4.bp.blogspot.com/-qBRgGwvk5qE/VYl2x344MQI/AAAAAAAAACQ/aCve-NWp5dM/s1600/karamba%25E3%2581%25AE%25E3%2582%25B7%25E3%2582%25A7%25E3%2583%25AB%25E8%25A6%2581%25E7%25B4%25A0%25E4%25BD%259C%25E6%2588%2590.JPG)</div><div class="separator" style="clear: both; text-align: center;">  
</div><div class="separator" style="clear: both; text-align: left;">　そして作成したシェル要素をAssemble Modelコンポ―ネント の Point と Element に接続します。これでFEMでいうところの、節点と要素の作成は終りです。ここでは、シェルの板厚はCross sectionを指定しない限りKarambaのデフォルトの値 1cmとなります。</div><div class="separator" style="clear: both; text-align: left;">  
</div><div class="separator" style="clear: both; text-align: center;">[![](http://2.bp.blogspot.com/-itJCmUbpnRE/VZlPE-PArEI/AAAAAAAAACk/NQ4E4yNutyE/s320/assemble_model.JPG)](http://2.bp.blogspot.com/-itJCmUbpnRE/VZlPE-PArEI/AAAAAAAAACk/NQ4E4yNutyE/s1600/assemble_model.JPG)</div><div class="separator" style="clear: both; text-align: left;">  
</div><div class="separator" style="clear: both; text-align: left;">　ｋarambaは、有限要素解析に基づいているため、他のFEMソフトと同様に解析モデルに対して、境界条件と荷重を設定する必要があります。</div><div class="separator" style="clear: both; text-align: left;">  
</div><div class="separator" style="clear: both; text-align: left;">　境界条件の設定には、Supportコンポーネントを使用します。Pos|Indに節点情報を入力することでその点に境界条件を設定します。ここでは、ピン境界とするため、変位に関するTx,Ty,Tzを拘束するように設定します。</div><div class="separator" style="clear: both; text-align: left;">　メッシュ上の点をSupportに入力しても、それはKarambaの節点ではないため、境界条件とならずエラーとなってしまいます。そこで、Evalutate Suｒfaceコンポーネントを使用することで、作成したSurface上の点の座標を取得し、境界条件を作成します。ここでは境界条件は四隅に作成します。</div><div class="separator" style="clear: both; text-align: left;">  
</div><div class="separator" style="clear: both; text-align: center;">[![](http://3.bp.blogspot.com/-3DJLZ7lFQj0/VZlSENToRhI/AAAAAAAAACw/MZvNO_41leY/s320/%25E5%25A2%2583%25E7%2595%258C%25E6%259D%25A1%25E4%25BB%25B6.JPG)](http://3.bp.blogspot.com/-3DJLZ7lFQj0/VZlSENToRhI/AAAAAAAAACw/MZvNO_41leY/s1600/%25E5%25A2%2583%25E7%2595%258C%25E6%259D%25A1%25E4%25BB%25B6.JPG)</div><div class="separator" style="clear: both; text-align: center;">  
</div><div class="separator" style="clear: both; text-align: left;">　同様に荷重条件を指定し、解析を行うことで変位を求めることができます。</div><div class="separator" style="clear: both; text-align: left;">  
</div>力から形を出していますが、応力や変位の量を考えずにどのような形かだけを見ているだけなので、現段階ではkarambaでやる必要はあまりありないかもしれません。ですがモデリングができたら、Grasshopperには非常に充実した最適化機能があるのでこの機能とうまく組み合わせれば簡単に構造最適化ができます。  

==============================  
参考：http://www.karamba3d.com/karamba-form-finding/</div>