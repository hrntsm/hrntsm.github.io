---
path: "/blog/2020/02/stb2u"
title: "st-bridgeのunity読み込みツール「Stb2U」について"
date: "20/02/05"
originalUrl: "https://rgkr-memo.blogspot.com/2020/02/stb2u.html"
slug: "/blog/2020/02/stb2u"
tags:
    - Unity
    - C#
---
<span style="background-color: white; color: #7b7b7b; font-family: sans-serif; font-size: 15px; letter-spacing: 0.21px;">　Unityで建築構造設計の一貫計算ソフトとBIMの連携等に使用されているST-Bridgeデータを読み込むアセットを作成したので公開します。</span>  
<div class="separator" style="clear: both; text-align: left;"><span style="background-color: white; color: #7b7b7b; font-family: sans-serif; font-size: 15px; letter-spacing: 0.21px;">　動作の様子は以下のような感じです。ここで使っている建物のST-Bridgeデータは、規格を作成している一般社団法人 building SMART Japan さんで公開されている「</span>[ST-Bridge Viewer](https://www.building-smart.or.jp/old/download/files/20171030_st.zip)<span style="background-color: white; color: #7b7b7b; font-family: sans-serif; font-size: 15px; letter-spacing: 0.21px;">」のなかのサンプルデータを使用させていただいています。</span></div><div class="separator" style="clear: both; text-align: left;"><span style="background-color: white; color: #7b7b7b; font-family: sans-serif; font-size: 15px; letter-spacing: 0.21px;">  
</span></div><div class="separator" style="clear: both; text-align: center;">[![](https://1.bp.blogspot.com/-IIo29ddUg58/Xjoap7b_a9I/AAAAAAAABvg/KFJGHy6UBhE2tWtAPuN57ctc7PxLnLz4gCLcBGAsYHQ/s640/stb2u.gif)](https://1.bp.blogspot.com/-IIo29ddUg58/Xjoap7b_a9I/AAAAAAAABvg/KFJGHy6UBhE2tWtAPuN57ctc7PxLnLz4gCLcBGAsYHQ/s1600/stb2u.gif)</div>  
<div class="separator" style="background-color: white; box-sizing: border-box; clear: both; color: #7b7b7b; font-family: sans-serif; font-size: 15px; letter-spacing: 0.21px; text-align: center;"></div><div class="separator" style="background-color: white; box-sizing: border-box; clear: both; color: #7b7b7b; font-family: sans-serif; font-size: 15px; letter-spacing: 0.21px; text-align: center;">  
</div>  
[](https://draft.blogger.com/null)<span style="background-color: white; color: #7b7b7b; font-family: sans-serif; font-size: 15px; letter-spacing: 0.21px;">　そもそもST-Bridgeとは何か？というのは、bSJ さんのサイトより確認ください。</span>  
<div style="background-color: white; box-sizing: border-box; color: #7b7b7b; font-family: sans-serif; font-size: 15px; letter-spacing: 0.21px;">[https://www.building-smart.or.jp/meeting/buildall/structural-design/](https://www.building-smart.or.jp/meeting/buildall/structural-design/)</div><div style="background-color: white; box-sizing: border-box; color: #7b7b7b; font-family: sans-serif; font-size: 15px;"><div style="box-sizing: border-box; letter-spacing: 0.21px;"><b style="box-sizing: border-box;">  
**</b></div><div style="box-sizing: border-box; letter-spacing: 0.21px;"><b style="box-sizing: border-box;">  
**</b></div><div style="box-sizing: border-box;"><b style="box-sizing: border-box; letter-spacing: 0.21px;">アセットの対応状況（Stb2U v.0.1）**  
<div style="box-sizing: border-box;">

*   入力されたデータから部材ごとにメッシュを作ります。
*   基本的なタグのデータには対応（柱、梁、間柱、小梁、ブレース、スラブ）
*   耐震壁、基礎、杭ほかパラペット等は非対応です。
*   S、RC、SRC、CFTに対応していますが、そんなに多くのデータでデバッグしているわけではないので、全部がうまく出るかはよくわかりません。
*   ST-BridgeのVersion1.x 系が対象で、Version2.x 系は非対応です。
*   部材のハンチには対応していません。中央断面で出力します。
*   対応している鉄骨断面は、ロールH、ビルトH、ロールBOX、ビルトBOX、Lです。T、C、LipC、FB、Pipeは非対応です。
*   部材のオフセット、回転には非対応なので、例えばH柱は常にX軸方向が強軸で出力されます。
*   アセット読み込み後、メニューバーに表示されるStb2Uからstbファイルを読み込むことでモデルが作成されます。<div style="box-sizing: border-box; letter-spacing: 0.21px;">　非対応なのは実装が難しいわけではなく、自分の手元にあるサンプルではおおむね出力できるようになって満足したので実装していないだけで、需要とやる気があればそのうち実装するかもしれません。</div><div style="box-sizing: border-box; letter-spacing: 0.21px;">  
</div><div style="box-sizing: border-box; letter-spacing: 0.21px;"><b style="box-sizing: border-box;">ダウンロードについて**</b></div><div style="box-sizing: border-box; letter-spacing: 0.21px;">　AssetStoreに出していないので、アセットのダウンロードは私のGitHubからREADME、LICENSEを確認の上、どうぞ。 </div><div style="box-sizing: border-box; letter-spacing: 0.21px;">　ダウンロードリンク：[https://github.com/hiro-n-rgkr/Stb2Unity/releases](https://github.com/hiro-n-rgkr/Stb2Unity/releases)</div><div style="box-sizing: border-box; letter-spacing: 0.21px;">  
</div><div style="box-sizing: border-box; letter-spacing: 0.21px;">　コードが気になる方は同じく[Githubのリポジトリ](https://github.com/hiro-n-rgkr/Stb2Unity)もしくはダウンロードしたアセットに入っている.csファイルを参照ください。ぐちゃぐちゃですが、C#のLINQを使ってXMLを読み込んでいるだけです。</div><div style="box-sizing: border-box; letter-spacing: 0.21px;"><span style="letter-spacing: 0.3px;">　中身は以前開発したstbhopperとほぼ同様ですが、こちらの方があとなので、コードはこちらの方が整理されています。基本的な違いは、データの持ち方が違うのでそこを変更しているだけです。（gh版はdoubleで処理している箇所を、unityではfloatで処理するように変更している）</span></div><div style="box-sizing: border-box; letter-spacing: 0.21px;">　今後は、unity上で動作する環境はできているので、UIを整理しUnityなしでも動作するスタンドアロン版の開発を考えています。</div><div style="box-sizing: border-box; letter-spacing: 0.21px;">　チュートリアル動画は以下です。</div><div class="separator" style="clear: both; text-align: center;"><iframe width="320" height="266" class="YOUTUBE-iframe-video" data-thumbnail-src="https://i.ytimg.com/vi/xNscdeOBYWg/0.jpg" src="https://www.youtube.com/embed/xNscdeOBYWg?feature=player_embedded" frameborder="0" allowfullscreen=""></iframe></div><div class="separator" style="box-sizing: border-box; clear: both; letter-spacing: 0.21px; text-align: center;">  
</div><div class="separator" style="box-sizing: border-box; clear: both; letter-spacing: 0.21px;">　詳細が知りたい方は[上部のコンタクト](https://rgkr-memo.blogspot.com/p/var-blogid-idvar-contactformmessagesend.html)からお問い合わせください。</div></div></b></div></div>