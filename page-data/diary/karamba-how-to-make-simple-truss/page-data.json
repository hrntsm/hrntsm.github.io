{"componentChunkName":"component---src-templates-blog-post-js","path":"/diary/karamba-how-to-make-simple-truss","result":{"data":{"markdownRemark":{"html":"<p>　簡単なトラスのモデルの作成法を１から説明していきたいと思います。<br>\n以下のようなモデルを作成し、その横に解析結果のコンター図を設置するまでを説明していきます。また、作成したモデルは<a href=\"http://rgkr-memo.blogspot.jp/p/blog-page_4.html\">データ置場</a>にありますので、参考にしてください。  </p>\n<p><a href=\"http://1.bp.blogspot.com/-qYg3pRR6y9U/VpnS5yYQM7I/AAAAAAAABIE/UsRNv5JZ_mI/s1600/%25E3%2582%25AD%25E3%2583%25A3%25E3%2583%2597%25E3%2582%25B7%25E3%2583%25A7%25E3%2583%25B3%25E7%2594%25A8.JPG\"><img src=\"http://1.bp.blogspot.com/-qYg3pRR6y9U/VpnS5yYQM7I/AAAAAAAABIE/UsRNv5JZ_mI/s640/%25E3%2582%25AD%25E3%2583%25A3%25E3%2583%2597%25E3%2582%25B7%25E3%2583%25A7%25E3%2583%25B3%25E7%2594%25A8.JPG\"></a></p>\n<p>　karambaを使用する前に、トラスのモデル化を行います。はじめにトラスの上弦材、下弦材を作成します。Construction Point コンポーネントでポイントを作成し、それを MoveコンポーネントでX方向に移動させます。この2点をLineコンポーネントに入力することで、まずは下弦材を作成します。ポイントを移動させたことと同様に、Moveコンポーネントで下弦材をZ方向に移動させることで上弦材を作成します。</p>\n<p>　ここでTIPsですが、grasshopperの画面をダブルクリックして、キーワード検索するときに単独の数字を入れるとその値を持ったNumberSliderコンポーネントが出来ますが、その際に「1.0&#x3C;6.0&#x3C;9.0」と入力すると値が6.0、スライダーの範囲が1.0～9.0のNumberSliderコンポーネントを作成することができます。</p>\n<p><a href=\"http://2.bp.blogspot.com/-Tr6EGrFhCJg/VpnW84ltX3I/AAAAAAAABIQ/VBTKvB5Cb84/s1600/%25E4%25B8%258A%25E4%25B8%258B%25E3%2583%25A9%25E3%2582%25A4%25E3%2583%25B3%25E3%2581%25AE%25E4%25BD%259C%25E6%2588%2590.JPG\"><img src=\"http://2.bp.blogspot.com/-Tr6EGrFhCJg/VpnW84ltX3I/AAAAAAAABIQ/VBTKvB5Cb84/s640/%25E4%25B8%258A%25E4%25B8%258B%25E3%2583%25A9%25E3%2582%25A4%25E3%2583%25B3%25E3%2581%25AE%25E4%25BD%259C%25E6%2588%2590.JPG\"></a></p>\n<p>　では次に斜材を作成していきます。まず、斜材が取り付く位置にポイントを作成します。ＤｉｖｉｄｅCurveコンポーネントを使用します。入力する分割数は、トラス中央にまっすぐな部材を設置したいので、偶数(Even)を選択しています。<br>\n次に上弦材と下弦材でデータツリーを分けるためにExplodeTreeコンポーネントでそれぞれを分けます。最初にDivideCurveコンポーネントにつなげたものが｛0;0｝に入ります。<br>\n斜材は右半分と左半分で斜材の向きが違うので、片側半分のポイントだけを取得するため、SplitListコンポーネントで、半分にリストを分解します。半分の長さは、ListLengthコンポーネントを使用して判断します。ListLengthはリストの長さを出力するので、SplitListコンポーネントにindexに入力する際にexpreｓｓonとし「(x-1)/2+1」 を入力することで、入力値の半分＋１がコンポーネントに反映されるようにします。このことで、上弦材、下弦材の左半分のポイントを取得します。  </p>\n<p><a href=\"http://1.bp.blogspot.com/-C3E4c5B93nI/VpnjuV_z4vI/AAAAAAAABIg/0n2D7N7tWp8/s1600/%25E5%25B7%25A6%25E5%258D%258A%25E5%2588%2586%25E3%2581%25AE%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2583%2588%25E5%258F%2596%25E5%25BE%2597.JPG\"><img src=\"http://1.bp.blogspot.com/-C3E4c5B93nI/VpnjuV_z4vI/AAAAAAAABIg/0n2D7N7tWp8/s640/%25E5%25B7%25A6%25E5%258D%258A%25E5%2588%2586%25E3%2581%25AE%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2583%2588%25E5%258F%2596%25E5%25BE%2597.JPG\"></a></p>\n<p>　抽出したポイントをそのままLineコンポーネントにつなげると縦のラインができてしまうので、ShiftListコンポーネントで下弦材のリストのポイントを一つずらします。この時WrapのBooleanをFalseにすることで、最後のポイントを除外できます。</p>\n<p>　下弦材のポイントをずらすことができたら、上弦材と下弦材のデータツリーの長さをそろえるため、ShortestListコンポーネントを使用して短いリストに長さを合わせます。以上をLineコンポーネントにつなげることで、左側半分の斜材を作成することができます。同様にして右側半分も作成します。鉛直にまっすぐな部材はExplodeTreeコンポーネントからでてくるポイントをそのままLineコンポーネントにつなげることで作成します。</p>\n<p><a href=\"http://1.bp.blogspot.com/-GDpCkiwi7Xk/VpnpOeA6xGI/AAAAAAAABI4/Gr2M86hQYl0/s1600/%25E6%2596%259C%25E6%259D%2590%25E5%25AE%258C%25E6%2588%2590.JPG\"><img src=\"http://1.bp.blogspot.com/-GDpCkiwi7Xk/VpnpOeA6xGI/AAAAAAAABI4/Gr2M86hQYl0/s640/%25E6%2596%259C%25E6%259D%2590%25E5%25AE%258C%25E6%2588%2590.JPG\"></a></p>\n<p>　次に弦材の分割を行います。上弦材、下弦材はそれぞれ1本のラインなので、斜材がとりつく部分で分割を行います。</p>\n<p>　分割にはShatterコンポーネントを使用します。Curveへ上弦材と下弦材を入力し、Parameterには分割点となるDivideCurveコンポーネントで作成した点を入力します。これで分割できますが、このままだと重複したラインができてしまいます。そのため重複したラインを削除するため、RemoveDuplicateLinesコンポーネントを使用します。これによって重複分が削除されたのが、Panalコンポーネントに表示されている内容からわかると思います。</p>\n<p>　のちに上弦材下弦材は、弦材としてひとまとめに断面を与える関係でFlattenを使用してRemoveDuplicateLinesコンポーネントに入力しています。</p>\n<p>　これでトラスの作成が完了です。</p>\n<p><a href=\"http://4.bp.blogspot.com/-V91AKnp8emo/VpnriO5_J4I/AAAAAAAABJE/aek5nfD2Lyo/s1600/%25E5%25BC%25A6%25E6%259D%2590%25E5%2588%2586%25E5%2589%25B2.JPG\"><img src=\"http://4.bp.blogspot.com/-V91AKnp8emo/VpnriO5_J4I/AAAAAAAABJE/aek5nfD2Lyo/s640/%25E5%25BC%25A6%25E6%259D%2590%25E5%2588%2586%25E5%2589%25B2.JPG\"></a></p>\n<p>　ではkarambaへ入力していきます。作成したトラスをLineToBeamコンポーネントを使用して梁要素を作成します。断面を分けるために各部位ごとに弦材：Chord、斜材：Web、鉛直材：Post とBeamIDを設定します。</p>\n<p><a href=\"http://1.bp.blogspot.com/-eVoA9VCXltQ/VpnwHdl9nAI/AAAAAAAABJQ/UMhWNcWd1iI/s1600/%25E8%25A6%2581%25E7%25B4%25A0%25E4%25BD%259C%25E6%2588%2590.JPG\"><img src=\"http://1.bp.blogspot.com/-eVoA9VCXltQ/VpnwHdl9nAI/AAAAAAAABJQ/UMhWNcWd1iI/s640/%25E8%25A6%2581%25E7%25B4%25A0%25E4%25BD%259C%25E6%2588%2590.JPG\"></a></p>\n<p>　境界条件は、Supportコンポーネントを使用して右下と左下の端部にピン支点を設定します。<br>\n荷重は、Loadコンポーネントを使用して -Z方向に1g、梁要素荷重として1kN/mを設定します。<br>\n梁要素荷重（Type of Load がUniformLine）は、荷重方向が3パターンありますが、部材長さ分に全体座標系で指定された方向に荷重をかけるglobalを選択しています。他のものには要素座標系で指定された方向に荷重をかけるlocal to element、水平投影された部材長さに対して全体座標系で荷重をかけるglobal projがあります。</p>\n<p><a href=\"http://4.bp.blogspot.com/-b6H8IGe7Wpo/Vpn0AhZ2dVI/AAAAAAAABJk/EBgm2n5k2B8/s1600/%25E8%258D%25B7%25E9%2587%258D%25E3%2581%25A8%25E5%25A2%2583%25E7%2595%258C%25E6%259D%25A1%25E4%25BB%25B6.JPG\"><img src=\"http://4.bp.blogspot.com/-b6H8IGe7Wpo/Vpn0AhZ2dVI/AAAAAAAABJk/EBgm2n5k2B8/s640/%25E8%258D%25B7%25E9%2587%258D%25E3%2581%25A8%25E5%25A2%2583%25E7%2595%258C%25E6%259D%25A1%25E4%25BB%25B6.JPG\"></a></p>\n<p>　弦材の部材断面はCrossSctionコンポーネントを使用して決定します。ここではElems|Idsには弦材で指定したChordを入力します。Heightには30(cm)、Widthには4.0(cm)を入力します。CrossSctionには、H型鋼を使用したいことから I を選択します。<br>\nこのまますべての項目を入力すれば入力した断面をもつ断面の指定ができますが、ここではCrossSctionMatcherコンポーネントを使用して、この条件に合致する断面をkaramba側に選択させます。選択させるためには、選択させる元となるデータが必要なので、CrossSectionRengeSelectorコンポーネントを使用します。このコンポーネントでJapan、I　を選択することでkarambaに始めから設定されているJIS-Hが選択されます。（断面についての詳細は<a href=\"http://rgkr-memo.blogspot.com/2015/09/blog-post.html\">karambaでの部材断面の設定と最適化</a>を参照してください。）　これらをCrossSctionMatcherコンポーネントに入力することで、条件に一番合致する形状が選択されます。<br>\nほかの部材の断面はCrossSctionSelectorコンポーネントを使用して設定します。これは使用したい断面の名称が分かっているときに使用します。斜材をJIS-HのH100x100x6x8にしたいとすれば、Elems|IdsにWeb、Name|IdsにH100x100x6x8を入力することで、断面が選択されます。  </p>\n<p><a href=\"http://4.bp.blogspot.com/-W6LM70DpB3I/Vpn6mB1P5UI/AAAAAAAABJ0/78grDCcojTg/s1600/%25E6%2596%25AD%25E9%259D%25A2%25E3%2581%25AE%25E8%25A8%25AD%25E5%25AE%259A.JPG\"><img src=\"http://4.bp.blogspot.com/-W6LM70DpB3I/Vpn6mB1P5UI/AAAAAAAABJ0/78grDCcojTg/s640/%25E6%2596%25AD%25E9%259D%25A2%25E3%2581%25AE%25E8%25A8%25AD%25E5%25AE%259A.JPG\"></a></p>\n<p>　モデルの構成をわかりやすくするために、作成した各設定は、Element、Support、Load、CrossSctionの各コンポーネントに一度まとめてから、AssembleModelコンポーネントに接続します。karambaはデータツリーが分かれていると別のモデルとして認識するので、Flattenを入れることでそれを防いでいます。<br>\nAssmbleModelコンポーネントで作成したモデルをAnalyzeⅠに入力することで解析を行います。またModelVeiwコンポーネントに入力することで、モデルの断面の名前や、解析結果でのモデルの変形の図示の倍率などが設定できます。またこのコンポーネントで、荷重で設定したLoadCaseのどれを図示するかを設定するので、解析結果をみるときは今図示しているものが荷重ケースが何に該当するか気をつけましょう。<br>\n解析結果はAnalyzeⅠで出力されたモデル情報をBeamViewコンポーネントに入力することで確認できます。SectionForceの項目で応力の図示を行うこともできます。Legend C、Legend TをLegendコンポーネントに入力することで解析結果の判例をみることができます。またLegendコンポーネントの入力箇所のRectangleでSet One Rectangleを選び、Rhino上の長方形を作成することでRhino上にも判例を作成することができます。  </p>\n<p><a href=\"http://1.bp.blogspot.com/-BZafiPM-LaY/VpoA7OkmQ1I/AAAAAAAABKE/SA6giMJ0KKI/s1600/%25E5%25AE%258C%25E6%2588%2590.JPG\"><img src=\"http://1.bp.blogspot.com/-BZafiPM-LaY/VpoA7OkmQ1I/AAAAAAAABKE/SA6giMJ0KKI/s640/%25E5%25AE%258C%25E6%2588%2590.JPG\"></a></p>\n<p>以上で、karamba での簡単なトラスのモデルを作成は終りです。</p>","excerpt":"簡単なトラスのモデルの作成法を１から説明していきたいと思います。 　以下のようなモデルを作成し、その横に解析結果のコンター図を設置するまでを説明していきます。また、作成したモデルはデータ置場にありますので、参考にしてください。    　karamba…","frontmatter":{"date":"16 January, 2016","path":"/diary/karamba-how-to-make-simple-truss","title":"karamba での簡単なトラスのモデルを作成","tags":["karamba"]},"fields":{"readingTime":{"text":"1 min read"}}}},"pageContext":{}},"staticQueryHashes":["3649515864","63159454"]}