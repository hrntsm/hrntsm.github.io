{"componentChunkName":"component---src-templates-blog-post-js","path":"/articles/rhino.inside.unity-sendmesh","result":{"data":{"markdownRemark":{"html":"<p>　Rhino.Inside.UnityでUnityからRhinoにメッシュを送る部分を作成したので、送り方を説明します。なお作った結果として、メッシュはデータ量が多いからか動作が非常に重くなるので、リアルタイムでメッシュのやり取りをしない限りはFBXなどを介して送ったほうがよさそうです。  </p>\n<p><a href=\"https://1.bp.blogspot.com/-VYfATyeLD_k/XmERX5ZA1cI/AAAAAAAABzU/TazirU_T4GUczJpEcmT1UYhCq7GWtczuACLcBGAsYHQ/s1600/RIUmesh.gif\"><img src=\"https://1.bp.blogspot.com/-VYfATyeLD_k/XmERX5ZA1cI/AAAAAAAABzU/TazirU_T4GUczJpEcmT1UYhCq7GWtczuACLcBGAsYHQ/s640/RIUmesh.gif\"></a></p>\n<p>mcneelのGitHubにRhinoからUnityにメッシュを送る部分があるのですが、UnityからRhinoに送る部分がなかったためその部分を作成しました。<br>\nただし今回作成したのは、Unityでゲームオブジェクトにアタッチされているメッシュそのもの（MeshFilterの中のMesh）を送っているだけなため、transformで設定するposition、rotation、scaleは送っていません。このこともあって冒頭でFBXなどのものを進めています。<br>\n作成したベースは<a href=\"https://github.com/mcneel/rhino.inside/tree/master/Unity/Sample2\">Rhino.Inside.Unityのsample2</a>を使っています。<br>\nRhinoに送るためにはUnityのメッシュ(UnityEngine.Mesh)をRhinoのメッシュ(Rhino.Geometry.Mesh)に変換する必要があるので、そこを作成します。上記サンプルの中ではConvert.csの中でその変換をやっているので、そこに追記します。追記した内容は以下です。  </p>\n<p>　UnityのMesh(_mesh)を受け取って、そこからBrepを作り、そのBrepからRhinoのMeshを作っています。<br>\nBrepのつくり方は、まずUnityのメッシュのverticesとtrianglesを使って構成する3点を取得します。この点はUnityのVector3なので、ToRhinoでRhinoのPoint3dに変換し、CreateFromCornerPointsでBrepを作ります。最後の引数は、toleranceなので、想定する精度をもとに決めればよいですが、Unityの1は1m相当なので、ここでtoleranceを1mmと思って1にすると細かいモデルはうまく送れないのでここでは0.0001にしています。必要な精度で適宜設定してください。<br>\nMeshはBrepからCreateFromBrepでつくりAppendすることでひとまとまりのメッシュにしています。<br>\n送るメッシュは別途RhinoInsideController.csを作ってそれを適当なゲームオブジェクトにアタッチして、そこに_sendObjectとして受け取るようにしてます。  </p>\n<p>　Grasshopperで受け取る側は以下です。  </p>\n<p>　受け取り方は、ポイントの受け取り方と同じでNameCallbackを使ってやっています。  </p>\n<p>　ここで作ったものはUnityのプロジェクトごと<a href=\"https://github.com/hrntsm/rhino.inside/tree/master/Unity\">ここのSample3</a>にあげました。Unity 2018.4で作っています。参考にしてください。</p>","excerpt":"Rhino.Inside.UnityでUnityからRhinoにメッシュを送る部分を作成したので、送り方を説明します。なお作った結果として、メッシュはデータ量が多いからか動作が非常に重くなるので、リアルタイムでメッシュのやり取りをしない限りはFBXなどを介して送ったほうがよさそうです。    mcneelのGitHub…","frontmatter":{"date":"05 March, 2020","path":"/articles/rhino.inside.unity-sendmesh","title":"RhinoInside UnityでRhinoへメッシュを送るやり方","tags":null},"fields":{"readingTime":{"text":"1 min read"},"slug":"/rhino.inside.unity-sendmesh/","collection":"article"}}},"pageContext":{}},"staticQueryHashes":["3649515864","63159454"]}